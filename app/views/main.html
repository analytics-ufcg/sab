<section class="map-container">

  <div class="map-info">
    <div class="input-group">
      <span class="input-group-addon"><span class="glyphicon glyphicon-search"></span></span>
      <input
        type="text"
        class="form-control"
        placeholder="Pesquisar..."
        ng-model="reservatorioSelecionado"
        uib-typeahead="reservatorio as reservatorio.reservat for reservatorio in main.reservatorios | filter:$viewValue"
        typeahead-min-length="3"
        typeahead-on-select="main.setReservatorio(reservatorioSelecionado); reservatorioSelecionado = '';">
    </div>

    <div class="info-card" ng-show="main.reservatorioSelecionado.reservat">

      <div class="info-card-header">
        <a href="#" class="info-card-showhide-btn" ng-click="main.toggleInfo()">
          <span class="glyphicon" ng-class="{'glyphicon-chevron-down': main.showInfo, 'glyphicon-chevron-up': !main.showInfo}"></span>
        </a>
        <h2 class="info-card-title">{{main.reservatorioSelecionado.reservat}}</h2>
      </div>

      <div class="info-card-body" ng-if="main.showInfo">

        <div class="info-card-tab" ng-if="main.isSelectedTab(0)">

          <div class="map-item-row" ng-show="main.reservatorioSelecionado.nome"><strong>Nome</strong> {{main.reservatorioSelecionado.nome}}</div>
          <div class="map-item-row" ng-show="main.reservatorioSelecionado.municipio"><strong>Localidade</strong> {{main.reservatorioSelecionado.municipio + ' - ' + main.reservatorioSelecionado.estado}}</div>
          <div class="map-item-row" ng-show="main.reservatorioSelecionado.bacia"><strong>Bacia</strong> {{main.reservatorioSelecionado.bacia}}</div>
          <div class="map-item-row" ng-show="main.reservatorioSelecionado.tipo"><strong>Tipo</strong> {{main.reservatorioSelecionado.tipo}}</div>
          <div class="map-item-row" ng-show="main.reservatorioSelecionado.area > 0"><strong>Área</strong> {{main.reservatorioSelecionado.area}} m²</div>
          <br>
          <div class="row row-sm">
            <div class="col-xs-6 col-xs-offset-3 col-sm-6 col-sm-offset-0 col-sm">
                <sab-volume volume="main.reservatorioSelecionado.volume_percentual"></sab-volume>
            </div>
            <div class="col-sm-6 col-sm-offset-0 col-sm">

              <div class="row row-sm">
                <div class="col-xs-6 col-sm text-right">
                  <div class="map-item-row" ng-show="main.reservatorioSelecionado.capacidade"><strong>Capacidade</strong></div>
                </div>
                <div class="col-xs-6 col-sm">
                  <span ng-show="main.reservatorioSelecionado.capacidade">{{main.reservatorioSelecionado.capacidade}} hm³</span>
                </div>
                <div class="col-xs-6 col-sm text-right">
                  <div class="map-item-row" ng-show="main.reservatorioSelecionado.volume"><strong>Volume</strong></div>
                </div>
                <div class="col-xs-6 col-sm">
                  <span ng-show="main.reservatorioSelecionado.volume">{{main.reservatorioSelecionado.volume}} hm³</span>
                </div>
                <div class="col-xs-12 col-sm text-center" ng-show="main.reservatorioSelecionado.data_informacao">
                  <small>Medido em {{main.reservatorioSelecionado.data_informacao}}</small>
                </div>
              </div>
            </div>
          </div>

        </div>
        <div class="info-card-tab" ng-if="main.isSelectedTab(1)">
          <div class="map-graph" ng-if="main.reservatorioSelecionado.volumes.length">
            <sab-reservatorio-historico
                monitoramento="main.reservatorioSelecionado.volumes"
                slider="main.slider"></sab-reservatorio-historico>
            <rzslider rz-slider-model="main.slider.minValue"
                      rz-slider-high="main.slider.maxValue"
                      rz-slider-options="main.slider.options"></rzslider>
          </div>
          <p class="mensagem-monitoramento" ng-hide="main.reservatorioSelecionado.volumes.length">Não possui dados de monitoramento</p>
        </div>
      </div>

      <div class="info-card-footer">
        <ul class="nav nav-tabs nav-justified">
          <li role="presentation" ng-class="{'active': main.isSelectedTab(0)}"><a href="#" ng-click="main.setSelectedTab(0)"><span class="glyphicon glyphicon-info-sign"></span> Info</a></li>
          <li role="presentation" ng-class="{'active': main.isSelectedTab(1)}"><a href="#" ng-click="main.setSelectedTab(1)"><span class="glyphicon glyphicon-stats"></span> Histórico</a></li>
        </ul>
      </div>
    </div>

  </div>
  <div id="map">
    <sab-mapa on-select-reservatorio="main.setReservatorioByID" reservatorio-selecionado="main.reservatorioSelecionado"></sab-mapa>
  </div>
</section>
